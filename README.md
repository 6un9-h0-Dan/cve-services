# CVE-API


## Table of contents
* [Technologies](#technologies)
* [Style Guidelines](#style-guidelines)
* [Setup](#getting-started)
* [Unit Testing](#unit-testing)


In order to Create API Docs run:

```sh
npm run docs
```
This creates an html file that can be found under apidocs/

## Technologies

This project uses or depends on software from

- NodeJS https://nodejs.org/
- Express https://github.com/expressjs
- MYSQL
- PM2 http://pm2.keymetrics.io/
- TypeScript https://www.typescriptlang.org/
- Sequelize http://docs.sequelizejs.com/

## Style Guidelines
This project uses the following Style Guidelines

- https://github.com/standard/standard




## Getting started

#### Step 1. Install required node modules

```sh
    cd cve-id-allocation-service-prototype
    npm install
    ./node_modules/pm2/bin/pm2 install typescript 
```

#### Step 2. Setup MySQL.

    See https://dev.mysql.com/doc/mysql-getting-started/en/

#### Step 3. Edit the src/config/config.json file to suite your requirements

    This config file is used to config variables for MySQL
    See src/config/example-config.json Example

#### Step 4. Create a .env file in the root folder

    This env file contains important variables needed.
    See .env-example for an example

#### Step 5. Create database and tables

Start the MySQL database

```sh
sudo /etc/init.d/mysql start
```

```sh
node_modules/.bin/sequelize db:create
node_modules/.bin/sequelize db:migrate
node_modules/.bin/sequelize db:seed:all
```

#### Step 6. Start the node application

In order to start a dev enviorment:

```sh
    npm run start:dev
```

In order to start a test enviorment with unit testing:

```sh
    npm run start:test
```


## Unit Testing

This project uses the following for unit testing

- https://mochajs.org/
- https://www.chaijs.com/

In order to run unit tests, use the following command:

```sh
npm run start:test
```

## In order to view server logs and to stop server

To view logs:

```sh
pm2 logs
```

To stop the server

```sh
pm2 stop all
```